@startuml
autonumber

actor User
participant App
participant API
database DB

User -> App: Add Item to Cart
activate App
App -> API: addItem(item, user)
activate API

API -> DB: Retrieve Cart (user)
activate DB
DB --> API: Cart Data
deactivate DB

API -> API: Add item to Cart
API -> DB: Update Cart (user, updated cart)
activate DB
DB --> API: Success
deactivate DB

API --> App: Success
deactivate API

App -> API: calculateTotal(cart)
activate API
API -> API: Calculate Total Price
API --> App: Total Price

deactivate API
App --> User: Display updated Cart with Total

User -> App: Proceed to Checkout
App -> API: checkout(cart, user)
activate API
API -> DB: Update Cart Status (user, checkout)
activate DB
DB --> API: Success
deactivate DB
API --> App: Redirect to Payment Gateway
deactivate API

App --> User: Redirect to Payment Gateway
deactivate App

@enduml