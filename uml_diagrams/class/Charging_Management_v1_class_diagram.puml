@startuml

skinparam classAttributeIconSize 0
hide empty members

class User {
}

class ChargingManager {
  + startRemoteCharging(vehicle: Vehicle): ChargingSession
  + stopRemoteCharging(session: ChargingSession): void
  + getChargingStatus(session: ChargingSession): ChargingStatusDTO
  + setChargingLimit(vehicle: Vehicle, limit: int, isForTrip: boolean): void
  + createSchedule(vehicle: Vehicle, scheduleDetails: ScheduleDTO): ChargingSchedule
  + editSchedule(schedule: ChargingSchedule): void
  + deleteSchedule(schedule: ChargingSchedule): void
  + findChargingStations(centerPoint: Location, filter: FilterCriteria): List<ChargingStation>
}

class Vehicle {
  - vin: String
  - isPluggedIn: boolean
  - currentSoC: int
}

class ChargingSettings {
  - maxChargeLimit: int
  - defaultDailyLimit: int = 80
  - oneTimeFullCharge: boolean
}

class ChargingSession {
  - sessionId: UUID
  - startTime: DateTime
  - endTime: DateTime
  - currentSoC: int
  - estimatedTimeToCompletion: Duration
  - currentRateKW: float
  - suppliedVoltage: float
  - suppliedAmperage: float
}

class ChargingSchedule {
  - scheduleId: UUID
  - startTime: Time
  - readyByTime: Time
  - isActive: boolean
  + create()
  + edit()
  + delete()
}

class ChargingStationFinder {
  + findStations(criteria: FilterCriteria): List<ChargingStation>
  + applyFilter(stations: List<ChargingStation>, criteria: FilterCriteria): List<ChargingStation>
}

class ChargingStation {
  - stationId: UUID
  - location: Coordinates
  - powerLevelKW: PowerLevel
  - isAvailable: boolean
  - networkOperator: String
}

class FilterCriteria {
  - connectorType: ConnectorType
  - powerLevel: PowerLevel
}

enum ConnectorType {
  TYPE_1
  TYPE_2
  CCS
  CHADEMO
  TESLA_NACS
}

enum PowerLevel {
  LEVEL_1_AC
  LEVEL_2_AC
  DC_FAST_50KW
  DC_FAST_150KW
  DC_FAST_350KW
}


' Relationships
User "1" -- "1..*" ChargingManager : uses >
ChargingManager ..> Vehicle
ChargingManager ..> ChargingSession
ChargingManager ..> ChargingSchedule
ChargingManager ..> ChargingStationFinder
ChargingManager ..> FilterCriteria

User "1" o-- "1..*" Vehicle
User "1" *-- "0..*" ChargingSchedule

Vehicle "1" *-- "1" ChargingSettings
Vehicle "1" -- "0..*" ChargingSchedule
Vehicle "1" o-- "0..*" ChargingSession

ChargingStation "1" o-- "0..*" ChargingSession
ChargingStation "1" *-- "1..*" ConnectorType
ChargingStation "1" -- "1" PowerLevel

ChargingStationFinder "1" o-- "0..*" ChargingStation
ChargingStationFinder "1" ..> "1" FilterCriteria

@enduml