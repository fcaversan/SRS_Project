@startuml
' Diagram refactored by a senior UML architect based on QA feedback.
' ITERATION 2: Focus is strictly on the Home Screen & Vehicle Status slice.
' This diagram follows MODERN PlantUML syntax.

start

:Launch Vehicle Connect App;

partition Authentication {
  :Require user authentication (Biometric/PIN);
  ' NFR-SEC-001
  if (Authentication successful?) then (yes)
    :Display Home Screen UI Shell;
    ' App must launch to a usable screen within 4s (NFR-PERF-003)
  else (no)
    :Display 'Authentication Failed' message;
    stop
  endif
}

partition "Home Screen Data Flow" {
    repeat
        fork
            :Fetch real-time vehicle status from Backend API;
            note right
                Data must reflect a state no older
                than 60 seconds per NFR-PERF-002.
            end note
        fork again
            :Fetch user profile settings;
            note left
                Get preferred units for temp (°F/°C)
                and distance (miles/km) per FR-USR-001.
            end note
        end fork

        if (Data and profile fetch successful?) then (yes)
            :Apply user's preferred units to status data;
            ' Implements FR-USR-001
            :Populate Home Screen with formatted vehicle status;
            note left
             - SoC & Battery Visual (FR-HSS-001, 002)
             - Estimated Range (FR-HSS-003, 004)
             - Lock Status (FR-HSS-005)
             - Cabin Temp (FR-HSS-006)
             - Climate Status (FR-HSS-007)
             - Vehicle Graphic (FR-HSS-008)
            end note
        else (no)
            :Handle graceful failure;
            note right
                Display cached data with 'last updated' timestamp
                or show an offline message per NFR-REL-002.
            end note
        endif

        :User views status on Home Screen;

    repeat while (User initiates status refresh (e.g., Pull-to-Refresh)?) is (yes)
    -> Refresh Data;
}

:User exits the application;

stop

@enduml